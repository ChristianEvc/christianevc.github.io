<!DOCTYPE html>
<html lang="en">

<head>
    <title>ATS Test</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <!-- Load this as close to the top of the document as possible -->
    <script async defer
        src="https://launchpad-wrapper.privacymanager.io/0ac9abb3-e561-4f79-9385-9bb06f8aa49a/launchpad-liveramp.js"></script>


</head>

<body>
    <h1>Hello, ATS!</h1>
    <form id="example-form">
        <label for="email">Your Email</label>
        <input type="text" id="email" required>
        <button type="submit">Submit</button>
    </form>


    <div>
        <h1>ATS stats</h1>
        <table>
            <thead>
                <tr>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ATS Enabled</td>
                    <td id="atsEnabled">?</td>
                </tr>
            </tbody>
        </table>
        
    </div>


    <script>

        document.addEventListener('DOMContentLoaded', () => {
            console.log("Doc loaded");

            const form = document.getElementById('example-form');
            form.addEventListener('submit', doSubmit);


            // hacky way
            setTimeout(() => {checkATSStatus();}, 2000);
        });

        function doSubmit(event) {
            console.log(`Form Submitted! Time stamp: ${event.timeStamp}`);
            event.preventDefault();
        }

        function checkATSStatus(){
            let atsEnabled = document.getElementById('atsEnabled');
            if (typeof(ats) == 'undefined') {
            atsEnabled.textContent = "Not loaded"
            } else {
                atsEnabled.textContent = "Loaded"
            }
        }


    </script>


</body>

</html>